document.getElementById('contact-form').addEventListener('submit', function(e) {
  e.preventDefault(); // –û—Ç–∫–ª—é—á–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã

  // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
  let formData = new FormData(this);
  let data = {};
  formData.forEach((value, key) => {
    data[key] = value;
  });

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
  const keys = {
    '–ß–µ–ª–æ–≤–µ–∫-–ø—Ä–∏—Ä–æ–¥–∞': ['1a', '3b', '6a', '10a', '11a', '13b', '16a', '20a'],
    '–ß–µ–ª–æ–≤–µ–∫-—Ç–µ—Ö–Ω–∏–∫–∞': ['1b', '4a', '7b', '9a', '11b', '14a', '17b', '19a'],
    '–ß–µ–ª–æ–≤–µ–∫-—á–µ–ª–æ–≤–µ–∫': ['2a', '4b', '6b', '8a', '12a', '14b', '16b', '18a'],
    '–ß–µ–ª–æ–≤–µ–∫-–∑–Ω–∞–∫–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞': ['2b', '5a', '9b', '10b', '12b', '15a', '19b', '20b'],
    '–ß–µ–ª–æ–≤–µ–∫-—Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –æ–±—Ä–∞–∑': ['3a', '5b', '7a', '8b', '13a', '15b', '17a', '18b'],
  };

  const scores = {
    '–ß–µ–ª–æ–≤–µ–∫-–ø—Ä–∏—Ä–æ–¥–∞': 0,
    '–ß–µ–ª–æ–≤–µ–∫-—Ç–µ—Ö–Ω–∏–∫–∞': 0,
    '–ß–µ–ª–æ–≤–µ–∫-—á–µ–ª–æ–≤–µ–∫': 0,
    '–ß–µ–ª–æ–≤–µ–∫-–∑–Ω–∞–∫–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞': 0,
    '–ß–µ–ª–æ–≤–µ–∫-—Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –æ–±—Ä–∞–∑': 0,
  };

  Object.entries(data).forEach(([question, answer]) => {
    Object.entries(keys).forEach(([type, answers]) => {
      if (answers.includes(answer)) {
        scores[type]++;
      }
    });
  });

  const maxType = Object.keys(scores).reduce((a, b) => (scores[a] > scores[b] ? a : b));
  const interpretation = {
    '–ß–µ–ª–æ–≤–µ–∫-–ø—Ä–∏—Ä–æ–¥–∞': '–≤—Å–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Ä–∞—Å—Ç–µ–Ω–∏–µ–≤–æ–¥—Å—Ç–≤–æ–º, –∂–∏–≤–æ—Ç–Ω–æ–≤–æ–¥—Å—Ç–≤–æ–º –∏ –ª–µ—Å–Ω—ã–º —Ö–æ–∑—è–π—Å—Ç–≤–æ–º;',
    '–ß–µ–ª–æ–≤–µ–∫-—Ç–µ—Ö–Ω–∏–∫–∞': '–≤—Å–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏',
    '–ß–µ–ª–æ–≤–µ–∫-—á–µ–ª–æ–≤–µ–∫': '–≤—Å–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ–º –ª—é–¥–µ–π, —Å –æ–±—â–µ–Ω–∏–µ–º',
    '–ß–µ–ª–æ–≤–µ–∫-–∑–Ω–∞–∫–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞': '–≤—Å–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –æ–±—Å—á–µ—Ç–∞–º–∏, —Ü–∏—Ñ—Ä–æ–≤—ã–º–∏ –∏ –±—É–∫–≤–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞–∫–∞–º–∏, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ –º—É–∑—ã–∫–∞–ª—å–Ω—ã–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏',
    '–ß–µ–ª–æ–≤–µ–∫-—Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –æ–±—Ä–∞–∑': '–≤—Å–µ —Ç–≤–æ—Ä—á–µ—Å–∫–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏',
  };

  const resultMessage = `
    –§–ò–û —Ä–µ–±–µ–Ω–∫–∞: ${data.name}
    –§–ò–û —Ä–æ–¥–∏—Ç–µ–ª—è: ${data.parentName}
    –í–æ–∑—Ä–∞—Å—Ç –∏ –∫–ª–∞—Å—Å: ${data.age}
    –¢–µ–ª–µ—Ñ–æ–Ω: ${data.phone}
    –ì–æ—Ä–æ–¥: ${data.city}
    –í—ã–±—Ä–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã: ${JSON.stringify(data)}
    –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ç–∏–ø –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏: ${maxType}
    ${interpretation[maxType]}
  `;

  console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç:', resultMessage);

  // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ Google Apps Script
const url = 'https://script.google.com/macros/s/AKfycbzcaok8sZovW-7lxMkfHes0PIecfioCU-psAX5fCEvYp4dWImZ-wlXSIJL8YdLymwWVZw/exec';
  
fetch(url, {
  method: 'POST',
  headers: {
    'Content-Type': 'application/x-www-form-urlencoded'
  },
  body: new URLSearchParams(formData) // –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ formData ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ —Ñ–æ—Ä–º—ã
})
.then(response => response.json())
.then(data => console.log('Success:', data))
.catch((error) => console.error('Error:', error));
});

// const URL_APP =     "https://script.google.com/macros/s/AKfycbzcaok8sZovW-7lxMkfHes0PIecfioCU-psAX5fCEvYp4dWImZ-wlXSIJL8YdLymwWVZw/exec";

// // –Ω–∞—Ö–æ–¥–∏–º —Ñ–æ—Ä–º—É –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ
// const form = document.querySelector("#mainForm");

// // —É–∫–∞–∑—ã–≤–∞–µ–º –∞–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã (–Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –Ω–∞—á–∞–ª–µ –ø—Ä–∏–º–µ—Ä–∞)
// form.action = URL_APP;

// // –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ —Ñ–æ—Ä–º—ã
// function isFilled(details) {
// 	const { name, email, phone, rule } = details;
// 	if (!name) return false;
// 	if (!email) return false;
// 	if (!phone) return false;
// 	if (!rule) return false;
// 	return true;
// }

// // –Ω–∞–≤–µ—à–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º—ã
// document.getElementById("mainForm").addEventListener("submit", async (ev) => {
// 	ev.preventDefault();

// 	const formData = new FormData(ev.target);
// 	// –ø–æ–ª—É—á–∞–µ–º —Å—Å—ã–ª–∫–∏ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º—ã

// 	const name = document.querySelector("[name=name]");
// 	const email = document.querySelector("[name=email]");
// 	const phone = document.querySelector("[name=phone]");
// 	const message = document.querySelector("[name=message]");

// 	const rule = document.querySelector("[name=rule]");

// let totalScore = 0;
// formData.forEach((value, key) => {
// 	if (key.startsWith("q") && !isNaN(value) && value !== "") {
// 			totalScore += parseInt(value, 10);
// 	}
// });

// // –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ø–æ–ª–µ message
// message.value = `–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤: ${totalScore}`;

// let messageResult;
// if (totalScore >= 0 && totalScore <= 3) {
// messageResult = `–í–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã - ${totalScore}: –æ—Ç 0-3, –≤—ã –º–æ–∂–µ—Ç–µ —Å–º–µ–ª–æ –ª–µ—Ç–µ—Ç—å –≤ –∫–æ—Å–º–æ—Å, –ø–æ—Å–∫–æ–ª—å–∫—É –≤—ã –Ω–µ —Å–∫–ª–æ–Ω–Ω—ã –∫ –ø—Å–∏—Ö–æ—Å–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è–º üòâ–∑–¥–æ—Ä–æ–≤–æ, —á—Ç–æ –≤—ã —Å–ª–µ–¥–∏—Ç–µ –∑–∞ —Å–≤–æ–∏–º –ø—Å–∏—Ö–æ—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º, —á–µ—Å—Ç–Ω—ã —Å —Å–∞–º–∏–º —Å —Å–æ–±–æ–π, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø—Ä–æ–∂–∏–≤–∞–µ—Ç–µ —ç–º–æ—Ü–∏–∏, —á—É–≤—Å—Ç–≤—É–µ—Ç–µ —Å–∏–≥–Ω–∞–ª—ã —Å–≤–æ–µ–≥–æ —Ç–µ–ª–∞ –∏ —É–º–µ–ª–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã.–ù–æ –∏–Ω–æ–≥–¥–∞ —Å–∏–º–ø—Ç–æ–º—ã –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ –∏ –µ—Å–ª–∏ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –ø–æ–º–æ—â—å –ø—Å–∏—Ö–æ—Å–æ–º–∞—Ç–æ–ª–æ–≥–∞ - —è –∫ –≤–∞—à–∏–º —É—Å–ª—É–≥–∞–º. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –º–æ–π –∫–æ–Ω—Ç–∞–∫—Ç –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–æ–º–æ—â—å –ø—Å–∏—Ö–æ—Å–æ–º–∞—Ç–æ–ª–æ–≥–∞`;
// } else if (totalScore >= 4 && totalScore <= 29) {
// messageResult = `–í–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã - ${totalScore}: –æ—Ç 4-29, —É –≤–∞—Å –µ—Å—Ç—å –ø—Å–∏—Ö–æ—Å–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–æ—Å—Ç–∞–≤–ª—è—é—â–∞—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∑–¥–æ—Ä–æ–≤—å—è. –í–æ–∑–º–æ–∂–Ω–æ, –≤–∞–º —ç—Ç–æ –Ω–µ –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç–∞ –∏ –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—É—é –∂–∏–∑–Ω—å, –Ω–æ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –±—ã —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –∫–∞–∫–∏–µ –∑–∞–¥–∞—á–∏ —Ä–µ—à–∞–µ—Ç –≤–∞—à–µ —Ç–µ–ª–æ –∑–∞ –ø—Å–∏—Ö–∏–∫—É, –∫–∞–∫–∏–µ –Ω–µ—Ä–µ—à–µ–Ω–Ω—ã–µ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã –ø—Ä–∏–≤–µ–ª–∏ –∫ —Ç–µ–ª–µ—Å–Ω–æ–º—É –æ—Ç–≤–µ—Ç—É. –ò —Ä–µ—à–µ–Ω–∏–µ —ç—Ç–∏—Ö –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–º –ø—Ä–æ–±–ª–µ–º –ø–æ–º–æ–∂–µ—Ç –≤–∞—à–µ–º—É —Ç–µ–ª—É –±—ã—Å—Ç—Ä–µ–µ —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å —Å–∏–º–ø—Ç–æ–º–∞–º–∏.`;
// } else if (totalScore >= 30 && totalScore <= 59) {
// messageResult = `–í–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã - ${totalScore}: –æ—Ç 30-59, —É –≤–∞—Å –º–Ω–æ–≥–æ –ø—Ä–æ–±–ª–µ–º —Å —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ–º –∏–∑-–∑–∞ –Ω–µ—Ä–µ—à–µ–Ω–Ω—ã—Ö –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏—á–∏–Ω, –ø–æ—ç—Ç–æ–º—É –≤—ã —Å–∫–ª–æ–Ω–Ω—ã –∫ –ø—Å–∏—Ö–æ—Å–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è–º –∏ —Ç–µ–ª–æ —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∞–º, —á—Ç–æ –ø–æ—Ä–∞ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫—É—é –ø—Ä–∏—á–∏–Ω—É –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è, –¥–∞–±—ã –æ–Ω–∏ –Ω–µ –ø–µ—Ä–µ—à–ª–∏ –≤ —Ö—Ä–æ–Ω–∏—á–µ—Å–∫—É—é —Ñ–æ—Ä–º—É.`;
// } else if (totalScore >= 60) {
// messageResult = `–í–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã - ${totalScore}: –æ—Ç 60, –∫–∞–∂–µ—Ç—Å—è, –≤–∞—à–∞ –ø—Å–∏—Ö–∏–∫–∞ –∏ —Ç–µ–ª–æ –∏–∑–º–æ—Ç–∞–Ω—ã –∏ –Ω–µ —Å–ø–æ—Å–æ–±–Ω—ã —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å –∑–∞–¥–∞—á–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–æ—è—Ç –ø–µ—Ä–µ–¥ –≤–∞–º–∏, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ–±—à–∏—Ä–Ω–æ–π —Å–∏–º–ø—Ç–æ–º–∞—Ç–∏–∫–µ. –ß—Ç–æ–±—ã —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å –ø—Å–∏—Ö–æ—Å–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø—Ä–∏—á–∏–Ω–∞–º–∏ –≤–∞—à–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ–≤–µ—Ç—É—é –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É –ø–æ –ø—Å–∏—Ö–æ—Å–æ–º–∞—Ç–∏–∫–µ. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ —Ç–µ–ª–æ –∏ –ø—Å–∏—Ö–∏–∫—É –≤ —Å–æ–≥–ª–∞—Å–∏–µ –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º.`;
// } else {
// messageResult = `–í–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã - ${totalScore}: –±–∞–ª–ª—ã –≤—ã—Ö–æ–¥—è—Ç –∑–∞ –ø—Ä–µ–¥–µ–ª—ã —à–∫–∞–ª—ã`;
// }

// document.getElementById("result").textContent = messageResult;

// 	// —Å–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ñ–æ—Ä–º—ã
// 	let details = {
// 		name: name.value.trim(),
// 		email: email.value.trim(),
// 		phone: phone.value.trim(),
// 		message: message.value.trim(),
// 		rule: rule.checked,
// 	};

// 	// –µ—Å–ª–∏ –ø–æ–ª—è –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã - –ø—Ä–µ–∫—Ä–∞—â–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É
// 	if (!isFilled(details)) return;

// 	// –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
// 	let formBody = [];
// 	for (let property in details) {
// 		// –∫–æ–¥–∏—Ä—É–µ–º –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
// 		let encodedKey = encodeURIComponent(property);
// 		let encodedValue = encodeURIComponent(details[property]);
// 		formBody.push(encodedKey + "=" + encodedValue);
// 	}
// 	// —Å–∫–ª–µ–∏–≤–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É
// 	formBody = formBody.join("&");

// 	// –≤—ã–ø–æ–ª–Ω—è–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö –≤ Google Apps
// 	const result = await fetch(URL_APP, {
// 		method: "POST",
// 		headers: {
// 			"Content-Type": "application/x-www-form-urlencoded;charset=UTF-8",
// 		},
// 		//cors: "no-cors", <- —ç—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
// 		mode: "cors", //<- –æ—Å—Ç–∞–≤–∏–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
// 		body: formBody,
// 	})
// 		.then((res) => res.json())
// 		.catch((err) => alert("–û—à–∏–±–∫–∞!"))
// 		// .then((res) => console.log(res));
		
// 	 if( result.type === 'success' ) {
// 			name.value = '';
// 			email.value = '';
// 			phone.value = '';
// 			message.value = '';
// 		//  alert('–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã!')
// 		console.log('–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã!')
// 	 }
// 	 if( result.type === 'error' ) {            
// 		 alert(`–û—à–∏–±–∫–∞( ${result.errors}`)
// 	 }
// });
